<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ESP32 Visual Studio</title>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/esptool-js@0.5.0/bundle.js"></script>
    <style>
        body { font-family: sans-serif; }
        #blocklyDiv { height: 70vh; width: 100%; border: 1px solid #ccc; }
        #console { background: #333; color: #eee; padding: 10px; height: 100px; overflow-y: auto; margin-top: 10px; }
        .controls { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="controls">
        <button onclick="compileAndFlash()" style="padding: 10px 20px; background: #28a745; color: white; border: none; cursor: pointer;">
            ⚡ ЗАГРУЗИТЬ В ESP32
        </button>
        <span id="status" style="margin-left: 20px; font-weight: bold;">Готов к работе</span>
    </div>

    <div id="blocklyDiv"></div>

    <xml id="toolbox" style="display:none">
        <category name="Логика" colour="210">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
        </category>
        <category name="Математика" colour="230">
            <block type="math_number"></block>
        </category>
        <category name="ESP32 Функции" colour="290">
            <block type="esp32_wifi_connect"></block>
            <block type="esp32_deep_sleep">
                <value name="SECONDS">
                    <shadow type="math_number"><field name="NUM">10</field></shadow>
                </value>
            </block>
        </category>
    </xml>

    <script src="blocks.js"></script>
    <script src="app.js"></script>
</body>
</html>
